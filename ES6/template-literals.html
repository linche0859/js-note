<!DOCTYPE html>
<html lang="zh-TW">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>標籤樣板字面值 | JavaScript 筆記</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="/js-note/favicon.ico">
    <meta name="description" content="">
    
    <link rel="preload" href="/js-note/assets/css/0.styles.e56c2623.css" as="style"><link rel="preload" href="/js-note/assets/js/app.5fe8dfb8.js" as="script"><link rel="preload" href="/js-note/assets/js/2.af3a266d.js" as="script"><link rel="preload" href="/js-note/assets/js/15.404690e3.js" as="script"><link rel="prefetch" href="/js-note/assets/js/10.3d3b2800.js"><link rel="prefetch" href="/js-note/assets/js/11.13fae7d3.js"><link rel="prefetch" href="/js-note/assets/js/12.580bb297.js"><link rel="prefetch" href="/js-note/assets/js/13.1059f782.js"><link rel="prefetch" href="/js-note/assets/js/14.70c0289a.js"><link rel="prefetch" href="/js-note/assets/js/16.d65d0662.js"><link rel="prefetch" href="/js-note/assets/js/17.839f2c9b.js"><link rel="prefetch" href="/js-note/assets/js/18.bf209b42.js"><link rel="prefetch" href="/js-note/assets/js/19.9188ee22.js"><link rel="prefetch" href="/js-note/assets/js/20.4a6a6035.js"><link rel="prefetch" href="/js-note/assets/js/21.bb687a84.js"><link rel="prefetch" href="/js-note/assets/js/22.af9ca011.js"><link rel="prefetch" href="/js-note/assets/js/23.0ba37701.js"><link rel="prefetch" href="/js-note/assets/js/24.a1fdbb11.js"><link rel="prefetch" href="/js-note/assets/js/25.823030e2.js"><link rel="prefetch" href="/js-note/assets/js/26.528a0842.js"><link rel="prefetch" href="/js-note/assets/js/27.febd6e09.js"><link rel="prefetch" href="/js-note/assets/js/28.de44c10c.js"><link rel="prefetch" href="/js-note/assets/js/29.fe715de8.js"><link rel="prefetch" href="/js-note/assets/js/3.c1900529.js"><link rel="prefetch" href="/js-note/assets/js/30.f687038c.js"><link rel="prefetch" href="/js-note/assets/js/31.fd38c8cb.js"><link rel="prefetch" href="/js-note/assets/js/32.51438de3.js"><link rel="prefetch" href="/js-note/assets/js/33.09855700.js"><link rel="prefetch" href="/js-note/assets/js/34.6355e6b1.js"><link rel="prefetch" href="/js-note/assets/js/35.eab0ce6d.js"><link rel="prefetch" href="/js-note/assets/js/36.e792f58f.js"><link rel="prefetch" href="/js-note/assets/js/37.8e84b643.js"><link rel="prefetch" href="/js-note/assets/js/38.3ec84b7d.js"><link rel="prefetch" href="/js-note/assets/js/39.f23a48bc.js"><link rel="prefetch" href="/js-note/assets/js/4.584c24b5.js"><link rel="prefetch" href="/js-note/assets/js/40.82bf6a75.js"><link rel="prefetch" href="/js-note/assets/js/41.319017d4.js"><link rel="prefetch" href="/js-note/assets/js/42.c715649e.js"><link rel="prefetch" href="/js-note/assets/js/43.e72ed285.js"><link rel="prefetch" href="/js-note/assets/js/44.cadb02e5.js"><link rel="prefetch" href="/js-note/assets/js/45.406d16be.js"><link rel="prefetch" href="/js-note/assets/js/46.95bed6a5.js"><link rel="prefetch" href="/js-note/assets/js/47.87817878.js"><link rel="prefetch" href="/js-note/assets/js/48.99a6b7ab.js"><link rel="prefetch" href="/js-note/assets/js/49.b93d11eb.js"><link rel="prefetch" href="/js-note/assets/js/5.b9092934.js"><link rel="prefetch" href="/js-note/assets/js/50.db5fbd85.js"><link rel="prefetch" href="/js-note/assets/js/51.8084fbc8.js"><link rel="prefetch" href="/js-note/assets/js/52.da4ba13c.js"><link rel="prefetch" href="/js-note/assets/js/53.bd49a605.js"><link rel="prefetch" href="/js-note/assets/js/54.49364ad7.js"><link rel="prefetch" href="/js-note/assets/js/55.365ec27b.js"><link rel="prefetch" href="/js-note/assets/js/56.b2c76821.js"><link rel="prefetch" href="/js-note/assets/js/57.7e3808c5.js"><link rel="prefetch" href="/js-note/assets/js/6.ed944b51.js"><link rel="prefetch" href="/js-note/assets/js/7.c74020b5.js"><link rel="prefetch" href="/js-note/assets/js/8.a12d0b24.js"><link rel="prefetch" href="/js-note/assets/js/9.5bc0b8ec.js">
    <link rel="stylesheet" href="/js-note/assets/css/0.styles.e56c2623.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/js-note/" class="home-link router-link-active"><!----> <span class="site-name">JavaScript 筆記</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://github.com/linche0859/js-note" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://github.com/linche0859/js-note" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>基礎應用</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>ES6</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/js-note/ES6/arrow-compare.html" class="sidebar-link">箭頭函式</a></li><li><a href="/js-note/ES6/string-method.html" class="sidebar-link">String Method</a></li><li><a href="/js-note/ES6/template-literals.html" aria-current="page" class="active sidebar-link">標籤樣板字面值</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/js-note/ES6/template-literals.html#範例一" class="sidebar-link">範例一</a></li><li class="sidebar-sub-header"><a href="/js-note/ES6/template-literals.html#預防-xss-攻擊" class="sidebar-link">預防 XSS 攻擊</a></li></ul></li><li><a href="/js-note/ES6/request-comparison.html" class="sidebar-link">Fetch API 和 Axios</a></li><li><a href="/js-note/ES6/promise.html" class="sidebar-link">非同步機制</a></li><li><a href="/js-note/ES6/lazyload-image.html" class="sidebar-link">透過 lazy loading 延遲載入圖片</a></li><li><a href="/js-note/ES6/regexp.html" class="sidebar-link">RegExp</a></li><li><a href="/js-note/ES6/file-api.html" class="sidebar-link">File API</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Functional Programming</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>RxJS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Gulp</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Plugin</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="標籤樣板字面值"><a href="#標籤樣板字面值" class="header-anchor">#</a> 標籤樣板字面值</h1> <div class="custom-block tip"><p class="custom-block-title">說明</p> <p>利用自訂函式，達到引用變數的替換</p></div> <h2 id="範例一"><a href="#範例一" class="header-anchor">#</a> 範例一</h2> <p>為每一個傳入變數加上 <code>span</code> 標籤</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> myName <span class="token operator">=</span> <span class="token string">'小明'</span><span class="token punctuation">;</span>
<span class="token comment">// strings 為陣列：['您好 ', '，餐點已經準備好囉，請 ', ' 過來取餐']</span>
<span class="token comment">// 展開的 arg 為陣列：['小明', '小明']</span>
<span class="token keyword">const</span> <span class="token function-variable function">highlight</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">strings<span class="token punctuation">,</span> <span class="token operator">...</span>arg</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  strings
    <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">str<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>str<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>arg<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;span&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>arg<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/span&gt;</span><span class="token template-punctuation string">`</span></span> <span class="token operator">:</span> <span class="token string">''</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> sentence <span class="token operator">=</span> highlight<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">您好 </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>myName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">，餐點已經準備好囉，請 </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>myName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> 過來取餐</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><img src="data:image/jpeg;base64,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" alt="輸出結果"></p> <h2 id="預防-xss-攻擊"><a href="#預防-xss-攻擊" class="header-anchor">#</a> 預防 XSS 攻擊</h2> <p>參考
<a href="https://forum.gamer.com.tw/Co.php?bsn=60292&amp;sn=11267" target="_blank" rel="noopener noreferrer">XSS 說明<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>主要使用 <strong>DOM-Based 防範</strong>，在畫面渲染的時候，為敏感字元做替換，結果即為文字格式，非 <code>HTML</code> 格式</p> <ul><li>範例一</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">convertHTML</span><span class="token punctuation">(</span><span class="token parameter">strings<span class="token punctuation">,</span> <span class="token operator">...</span>keys</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> strings
    <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>
      <span class="token punctuation">(</span><span class="token parameter">str<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
        <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>str<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>
          keys<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
            <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>keys<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
                <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&amp;</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">'&amp;amp;'</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">'&amp;lt;'</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&gt;</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">'&amp;gt;'</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
            <span class="token operator">:</span> <span class="token string">''</span>
        <span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 如果正常呈現(非用作 XSS 預防)，則在載入圖片時，同時執行 ajax</span>
<span class="token comment">// 有機會將用戶資訊洩漏出去</span>
<span class="token keyword">const</span> messageName <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;img onload=&quot;fetch('https://randomuser.me/api/')&quot; /&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span>
  <span class="token string">'#message'</span>
<span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> convertHTML<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;p&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>messageName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/p&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p><img src="/js-note/assets/img/literals-xss.7458c739.jpg" alt="輸出結果"></p> <ul><li>範例二</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">unescapeHTML</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>
    <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&amp;|&lt;|&gt;|'|&quot;</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token parameter">tag</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
      <span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token string">'&amp;'</span><span class="token operator">:</span> <span class="token string">'&amp;amp;'</span><span class="token punctuation">,</span>
        <span class="token string">'&lt;'</span><span class="token operator">:</span> <span class="token string">'&amp;lt;'</span><span class="token punctuation">,</span>
        <span class="token string">'&gt;'</span><span class="token operator">:</span> <span class="token string">'&amp;gt;'</span><span class="token punctuation">,</span>
        <span class="token string">&quot;'&quot;</span><span class="token operator">:</span> <span class="token string">'&amp;#39;'</span><span class="token punctuation">,</span>
        <span class="token string">'&quot;'</span><span class="token operator">:</span> <span class="token string">'&amp;quot;'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">[</span>tag<span class="token punctuation">]</span> <span class="token operator">||</span> tag<span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">unescapeHTML</span><span class="token punctuation">(</span><span class="token string">'&lt;a href=&quot;#&quot;&gt;Me &amp; you&lt;/a&gt;'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 輸出結果</span>
<span class="token comment">// &quot;&amp;lt;a href=&amp;quot;#&amp;quot;&amp;gt;Me &amp;amp; you&amp;lt;/a&amp;gt;&quot;</span>
<span class="token comment">// 在網頁上渲染即為文字字串</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">2020/7/14 上午7:46:01</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/js-note/ES6/string-method.html" class="prev">
        String Method
      </a></span> <span class="next"><a href="/js-note/ES6/request-comparison.html">
        Fetch API 和 Axios
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/js-note/assets/js/app.5fe8dfb8.js" defer></script><script src="/js-note/assets/js/2.af3a266d.js" defer></script><script src="/js-note/assets/js/15.404690e3.js" defer></script>
  </body>
</html>
